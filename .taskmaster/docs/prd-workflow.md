PRD 2: Professional Canvas & Workflow Features
Theme: Empowering the power designer with a fluid, efficient, and expressive creative workflow.
Vision & Goal: To bridge the gap between a basic drawing tool and a professional design application by adding the essential features for organization, precision, and consistency that power users expect.
Target Persona: The Power Designer, who values speed, precision, and control, and wants to build consistent design systems.
Feature ID	Feature Name	Description & User Value	Acceptance Criteria & Metrics	Technical Implementation Notes
WF-01	Advanced Selection & Grouping	Implement multi-select via Shift+Click and a draggable selection box (lasso). Allow users to group selected objects (Cmd/Ctrl+G) into a single unit and ungroup them. User Value: The cornerstone of efficient design work, this allows users to organize and manipulate complex arrangements with ease.	1. Users can select 10+ objects at once with both methods. 2. Grouped objects move, resize, and rotate as a single atomic unit. 3. Changes to groups are broadcast and synced in real-time.	- Backend: Add a group_id (nullable UUID) to the objects schema. The Canvases context will manage group creation. <br>- Frontend: Implement selection logic and lasso rendering in canvas_manager.js using PIXI.Graphics.
WF-02	Layer Management & Alignment Tools	Implement actions for z-index control ("Bring to Front," "Send to Back"). Add alignment tools (Align Left/Center/Right, Distribute Evenly) to the UI. User Value: Gives designers pixel-perfect control over composition and layout, a non-negotiable for professional design work.	1. A right-click context menu provides all layer and alignment actions. 2. Distributing 5+ objects results in mathematically even spacing. 3. All actions work on both multi-selections and groups.	- Backend: A z_index field may be needed on the objects schema. The existing Layout.ex module will be leveraged for alignment logic. <br>- Frontend: The UI for these tools will be added to the main toolbar or a new properties panel.
WF-03	Expanded Shape & Text Tools	Add tools for creating stars, triangles, and polygons. Enhance the text tool to support bold, italic, <u>underline</u>, and font size adjustments. User Value: Expands the user's creative palette, allowing for richer visual expression and sophisticated typography.	1. All new shapes can be created, styled, and manipulated. 2. Text formatting is available in a properties panel and updates in real-time. 3. All new properties are supported by the AI agent.	- Backend: The data JSON blob on the objects schema will store the new properties (e.g., sides for a polygon, fontWeight for text). Update CollabCanvas.AI.Tools. <br>- Frontend: New rendering logic in canvas_manager.js is required for the new shapes and text styles.
WF-04	High-Velocity Keyboard Shortcuts	Implement essential keyboard shortcuts: Duplicate (Cmd/Ctrl+D), Nudge (Arrow keys for 1px, Shift+Arrow for 10px), and Copy/Paste (Cmd/Ctrl+C/V). User Value: Dramatically accelerates the design workflow, making the tool feel fluid and responsive for power users.	1. All shortcuts are responsive and feel instantaneous (<50ms). 2. Duplicate and Paste work correctly on both single objects and groups.	- Frontend: This is primarily a frontend task. Keyboard event listeners in app.js or a dedicated JS module will trigger pushEvent calls to CanvasLive.
WF-05	Reusable Color Palettes	Allow users to create, name, and save palettes (e.g., 5-8 colors). Palettes are accessible from the color picker for quick and consistent color application. User Value: A crucial feature for maintaining design system consistency, saving time and eliminating guesswork.	1. The UI allows for creating and saving at least 10 named palettes. 2. Applying a color from a palette is a single click.	- Backend: Requires new palettes and palette_colors tables and expansion of the ColorPalettes context. <br>- Frontend: The ColorPicker LiveComponent will be updated to display and manage palettes.
WF-06	Export to PNG/SVG	Add a feature to export the entire canvas or a selection of objects as either a PNG or SVG file. User Value: Allows users to extract their work for use in other applications, presentations, or development handoffs.	1. Users can export a selection of 1 or more objects. 2. Exported files are high-quality and accurately represent the canvas content.	- Frontend: This can be handled almost entirely on the client side. The PixiJS application can be rendered to an offscreen canvas and converted to a data URL for download.
Cross-PRD Dependencies & Integration:
The Grouping feature (WF-01) is a critical prerequisite for the AI in PRD #3 to understand and operate on collections of objects.
The new shapes and text properties from WF-03 must be integrated into the AI agent's toolset in PRD #3.
Risks & Mitigation:
Risk: Implementing a full-featured grouping and layer management system can be complex. Mitigation: Start with a simple parent-child relationship for grouping and a z_index float value for layering.
Risk: Too many UI controls for text/alignment could clutter the interface. Mitigation: Design a context-aware properties panel that only shows relevant controls for the selected object(s).
