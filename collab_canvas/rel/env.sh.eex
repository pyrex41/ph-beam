#!/bin/sh

# Configure distributed Elixir for Fly.io
ip=$(grep fly-local-6pn /etc/hosts | cut -f 1)
if [ -n "$ip" ]; then
  export ELIXIR_ERL_OPTIONS="-proto_dist inet6_tcp"
  export ERL_AFLAGS="-proto_dist inet6_tcp"
fi

# Set the release to work across nodes
export RELEASE_DISTRIBUTION=name
export RELEASE_NODE=<%= @release.name %>@${FLY_APP_NAME}.internal
